<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qualcunə deve pagare.</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: linear-gradient(to right, #ff9999, #99ff99); /* Gradiente Rosso-Verde pastello */
    color: #333;
  }
  .container {
    max-width: 600px;
    margin: auto;
  }
  .header {
    background: #ffcccc; /* Rosso pastello */
    color: white;
    padding: 20px;
    margin-bottom: 30px;
  }
  .section {
    background: #ffffff; /* Sfondo bianco */
    padding: 20px;
    margin-top: 30px;
    border-radius: 10px;
  }
  input, button {
    padding: 10px;
    margin: 5px;
    border-radius: 5px;
    border: none;
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Qualcunə deve pagare.</h1>
  </div>
  <div id="authSection" class="section">
    <!-- Sezione di autenticazione -->
  </div>
  <div id="gameSection" class="section" style="display:none;">
    <h2>Tracciamento Gioco Corrente:</h2>
    <!-- Qui verranno visualizzati e aggiornati i punteggi del gioco corrente -->
  </div>
  <div id="userManagementSection" class="section" style="display:none;">
    <h2>Gestione Utenti:</h2>
    <!-- Qui gli utenti possono modificare/eliminare il proprio profilo -->
  </div>
  <div id="scoresSection" class="section" style="display:none;">
    <h2>Riepilogo Punteggi:</h2>
    <!-- Sezione per i punteggi -->
  </div>
</div>
<script>
let users = JSON.parse(localStorage.getItem('users')) || {};

document.addEventListener('DOMContentLoaded', function() {
  checkLoggedIn();
  createAuthForm();
});

function createAuthForm() {
  const formHtml = `
    <div>
      <input type="text" id="name" placeholder="Nome" />
      <input type="password" id="pin" placeholder="PIN (4 cifre)" />
      <button onclick="registerUser()">Registra</button>
      <button onclick="loginUser()">Accedi</button>
    </div>
  `;
  document.getElementById('authSection').innerHTML = formHtml;
}

function registerUser() {
  const name = document.getElementById('name').value;
  const pin = document.getElementById('pin').value;
  if (name && pin.length === 4) {
    users[name] = pin;
    localStorage.setItem('users', JSON.stringify(users)); // Salva l'utente
    alert("Utente registrato con successo!");
    loginUser(); // Effettua automaticamente il login dopo la registrazione
  } else {
    alert("Inserisci un nome e un PIN di 4 cifre.");
  }
}

function loginUser() {
  const name = document.getElementById('name').value;
  const pin = document.getElementById('pin').value;
  if (users[name] && users[name] === pin) {
    localStorage.setItem('currentUser', name); // Memorizza l'utente corrente
    displayScoreSection(); // Mostra la sezione dei punteggi
    alert("Accesso effettuato con successo!");
  } else {
    alert("Nome utente o PIN errati.");
  }
}

function displayScoreSection() {
  document.getElementById('authSection').style.display = 'none';
  document.getElementById('scoresSection').style.display = 'block';
  // Aggiorna la sezione dei punteggi con informazioni pertinenti, se necessario
}

function checkLoggedIn() {
  const currentUser = localStorage.getItem('currentUser');
  if (currentUser) {
    displayScoreSection(); // Mostra direttamente i punteggi se l'utente è già loggato
  } else {
    createAuthForm(); // Altrimenti mostra la form di autenticazione
  }
}

// Aggiungi qui le funzioni per tracciare i giochi, modificare/eliminare profili e punteggi
</script>
</body>
</html>